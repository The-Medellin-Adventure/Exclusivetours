(function(){if(typeof atob==='undefined'){globalThis.atob=function(b){return Buffer?Buffer.from(b,'base64').toString('binary'):((typeof window!=='undefined'&&window.atob)?window.atob(b):b);};}})();
window.token = new URLSearchParams(window.location.search).get(atob('dG9rZW4='));

atob('dXNlIHN0cmljdA==');

(function () {
  var Marzipano = window.Marzipano;
  var bowser = window.bowser;
  var screenfull = window.screenfull;
  var data = window.APP_DATA || {};

window.token = new URLSearchParams(window.location.search).get(atob('dG9rZW4='));
const FIRST_SCENE_ID = atob('MC1wbGF6YS1ib3Rlcm8tYm90ZXJv');

if (window.token) {
  fetch(`https://exclusivetours.vercel.app/api/verify-token?token=${window.token}`, { headers: { Accept: atob('YXBwbGljYXRpb24vanNvbg==') } })
    .then(async res => {
      const data = await res.json().catch(() => ({}));
      console.log(atob('8J+UjiBWRVJJRlktVE9LRU4gUkVTUFVFU1RBOg=='), res.status, JSON.stringify(data, null, 2));

      if (res.status === 403 || data.ok === false) {
        showErrorMessage(atob('8J+aqyBBY2Nlc28gZGVuZWdhZG8='), data.error || atob('RXN0ZSBlbmxhY2UgeWEgZnVlIHVzYWRvIG8gZXhwaXLDsy4='));
        ocultarUI();
        throw new Error(atob('VG9rZW4gaW52w6FsaWRvIG8gZXhwaXJhZG8='));
      }

      if (data.ok === true) {
        console.log(atob('4pyFIFRva2VuIHbDoWxpZG8sIG1vc3RyYXIgdG91cg=='));
        mostrarUI();
      }
    })
    .catch(err => {
      console.warn(atob('RXJyb3IgdmVyaWZpY2FuZG8gdG9rZW46'), err.message);
    });
}

  var panoElement = document.querySelector(atob('I3Bhbm8='));

  var sceneNameElement = document.getElementById(atob('c2NlbmVUaXRsZQ==')) || document.querySelector(atob('I3RpdGxlQmFyIC5zY2VuZU5hbWU='));
  var sceneListElement = document.querySelector(atob('I3NjZW5lTGlzdA=='));
  var sceneElements = document.querySelectorAll(atob('I3NjZW5lTGlzdCAuc2NlbmU='));
  var sceneListToggleElement = document.querySelector(atob('I3NjZW5lTGlzdFRvZ2dsZQ=='));
  var autorotateToggleElement = document.querySelector(atob('I2F1dG9yb3RhdGVUb2dnbGU='));
  var fullscreenToggleElement = document.querySelector(atob('I2Z1bGxzY3JlZW5Ub2dnbGU='));

  var viewerOpts = {
    controls: {
      mouseViewMode: (data.settings && data.settings.mouseViewMode) || atob('ZHJhZw==')
    }
  };
  var viewer = new Marzipano.Viewer(panoElement, viewerOpts);
  window.viewer = viewer;

  var currentSwiper = null;

  var activeView = null;

  function escapeHtml(str) {
    if (!str) return '';
    return String(str)
      .replace(/&/g, atob('JmFtcDs='))
      .replace(/</g, atob('Jmx0Ow=='))
      .replace(/>/g, atob('Jmd0Ow=='))
      .replace(/atob('L2csICcmcXVvdDsnKQogICAgICAucmVwbGFjZSgvJy9nLCAnJiMzOTsnKTsKICB9CgogIC8vID09PT09PT09PT09PT09PT09PT09PT09PT0KLy8gRnVuY2lvbmVzIGRlIGVycm9yIHkgb2N1bHRhciBVSQovLyA9PT09PT09PT09PT09PT09PT09PT09PT09CmZ1bmN0aW9uIG9jdWx0YXJVSSgpIHsKICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKAogICAgJy5saW5rLWhvdHNwb3QtaWNvbiwgLmNhbWVyYS1ob3RzcG90LCAjc2NlbmVMaXN0LCAjdGl0bGVCYXIsICN2aWRlb0NhcmQnCiAgKS5mb3JFYWNoKGVsID0+IHsKICAgIGlmIChlbCkgZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICB9KTsKfQpmdW5jdGlvbiBtb3N0cmFyVUkoKSB7CiAgLy8gUmV2ZXJ0aXIgbG8gcXVlIGhhY2Ugb2N1bHRhclVJKCkKICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubGluay1ob3RzcG90LWljb24sIC5jYW1lcmEtaG90c3BvdCwgI3NjZW5lTGlzdCwgI3RpdGxlQmFyLCAjdmlkZW9DYXJkJykKICAgIC5mb3JFYWNoKGVsID0+IHsgaWYgKGVsKSBlbC5zdHlsZS5kaXNwbGF5ID0gJyc7IH0pOwoKICAvLyBPY3VsdGFyIG92ZXJsYXkgZGUgZXJyb3Igc2kgZXhpc3RlCiAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKA==')errorOverlayatob('KTsKICBpZiAob3ZlcmxheSkgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwp9CmZ1bmN0aW9uIHNob3dFcnJvck1lc3NhZ2UodGl0dWxvLCBtZW5zYWplKSB7CiAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKA==')errorOverlayatob('KTsKICBpZiAoIW92ZXJsYXkpIHJldHVybjsKICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSA=')flexatob('OwogIG92ZXJsYXkuaW5uZXJIVE1MID0gYAogICAgPGRpdiBzdHlsZT0=')background:#fff;color:#000;padding:20px;border-radius:10px;max-width:400px;text-align:center;atob('PgogICAgICA8aDI+JHtlc2NhcGVIdG1sKHRpdHVsbyl9PC9oMj4KICAgICAgPHA+JHtlc2NhcGVIdG1sKG1lbnNhamUpfTwvcD4KICAgICAgPHAgc3R5bGU9')margin-top:12px;font-size:14px;color:#444;atob('PlRoZSBNZWRlbGzDrW4gQWR2ZW50dXJlPC9wPgogICAgPC9kaXY+CiAgYDsKfQoKICAvLyBWQVJJQUJMRVMgR0xPQkFMRVMKICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICB2YXIgY3VycmVudFNjZW5lID0gbnVsbDsKICB2YXIgY3VycmVudFZpZGVvU2NlbmVJZCA9IG51bGw7CiAgdmFyIGN1cnJlbnRWaWRlb1RpbWVvdXQgPSBudWxsOwoKICAvLyBOVUVWQVMgVkFSSUFCTEVTIHBhcmEgZWwgb3ZlcmxheSBncmFuZGUKICBsZXQgYmlnT3ZlcmxheU9wZW4gPSBmYWxzZTsKICBsZXQgc21hbGxTdGFydFRpbWVvdXQgPSBudWxsOwoKICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09Ci8vIEZVTkNJw5NOIE1PU1RSQVIgQ0FSUlVTRUwKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PQpmdW5jdGlvbiBtb3N0cmFyQ2FycnVzZWwoaW1hZ2VuZXMsIHRpdHVsbykgewogIGltYWdlbmVzID0gQXJyYXkuaXNBcnJheShpbWFnZW5lcykgPyBpbWFnZW5lcyA6IFtdOwogIGNvbnN0IGNhcnJ1c2VsQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhcnJ1c2VsQ29udGFpbmVyJyk7CiAgY29uc3QgY2FycnVzZWxUaXR1bG8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FycnVzZWxUaXR1bG8nKTsKICBjb25zdCBzd2lwZXJXcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NhcnJ1c2VsIC5zd2lwZXItd3JhcHBlcicpOwoKICBpZiAoIWNhcnJ1c2VsQ29udGFpbmVyIHx8ICFzd2lwZXJXcmFwcGVyKSB7CiAgICBjb25zb2xlLmVycm9yKA==')No se encontr√≥ el contenedor del carrusel en el HTMLatob('KTsKICAgIHJldHVybjsKICB9CgogIC8vIFTDrXR1bG8KICBjYXJydXNlbFRpdHVsby50ZXh0Q29udGVudCA9IHRpdHVsbyB8fCAnJzsKCiAgLy8gTGltcGlhcgogIHN3aXBlcldyYXBwZXIuaW5uZXJIVE1MID0gJyc7CgogIGltYWdlbmVzLmZvckVhY2goZnVuY3Rpb24gKGltZykgewogICAgdmFyIGZpbGVQYXRoID0gaW1nLnNyYyB8fCBpbWcudXJsIHx8ICcnOwogICAgdmFyIGNhcHRpb24gPSBpbWcuY2FwdGlvbiB8fCBpbWcudGV4dG8gfHwgJyc7CgogICAgLy8gQ3JlYXIgc2xpZGUgY29uIGltYWdlbiArIGNhcHRpb24KICAgIHZhciBzbGlkZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgc2xpZGUuY2xhc3NOYW1lID0gJ3N3aXBlci1zbGlkZSc7CiAgICBzbGlkZS5pbm5lckhUTUwgPSBgCiAgICAgIDxkaXYgc3R5bGU9')display:flex;flex-direction:column;align-items:center;atob('PgogICAgICAgIDxpbWcgc3JjPQ==')/api/signed-url?token=${window.token}&file=${encodeURIComponent(filePath)}atob('CiAgICAgICAgICAgICBzdHlsZT0=')max-width:80%;max-height:60vh;object-fit:contain;border-radius:8px;atob('IC8+CiAgICAgICAgJHtjYXB0aW9uID8gYDxwIHN0eWxlPQ==')margin-top:6px;color:#fff;font-size:14px;atob('PiR7ZXNjYXBlSHRtbChjYXB0aW9uKX08L3A+YCA6IA==')atob('fQogICAgICA8L2Rpdj4KICAgIGA7CiAgICBzd2lwZXJXcmFwcGVyLmFwcGVuZENoaWxkKHNsaWRlKTsKICB9KTsKCiAgY2FycnVzZWxDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsKCiAgaWYgKGN1cnJlbnRTd2lwZXIpIHsKICAgIHRyeSB7IGN1cnJlbnRTd2lwZXIuZGVzdHJveSh0cnVlLCB0cnVlKTsgfSBjYXRjaCAoZSkge30KICAgIGN1cnJlbnRTd2lwZXIgPSBudWxsOwogIH0KCiAgLy8gSW5pY2lhbGl6YXIgZWwgY2FycnVzZWwgc2luIGVzcGVyYXIgSlNPTgogIFByb21pc2UucmVzb2x2ZSgpLmZpbmFsbHkoKCkgPT4gewogICAgY3VycmVudFN3aXBlciA9IG5ldyBTd2lwZXIoJy5jYXJydXNlbC1zd2lwZXInLCB7CiAgICAgIGxvb3A6IGltYWdlbmVzLmxlbmd0aCA+IDEsCiAgICAgIHNsaWRlc1BlclZpZXc6IDEsCiAgICAgIHNwYWNlQmV0d2VlbjogMTAsCiAgICAgIGF1dG9wbGF5OiB7IGRlbGF5OiAzNTAwLCBkaXNhYmxlT25JbnRlcmFjdGlvbjogZmFsc2UgfSwKICAgICAgcGFnaW5hdGlvbjogeyBlbDogJy5zd2lwZXItcGFnaW5hdGlvbicsIGNsaWNrYWJsZTogdHJ1ZSB9LAogICAgICBuYXZpZ2F0aW9uOiB7IG5leHRFbDogJy5zd2lwZXItYnV0dG9uLW5leHQnLCBwcmV2RWw6ICcuc3dpcGVyLWJ1dHRvbi1wcmV2JyB9CiAgICB9KTsKICB9KTsKCiAgdmFyIGNlcnJhckJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjZXJyYXJDYXJydXNlbCcpOwogIGlmIChjZXJyYXJCdG4pIHsKICAgIGNlcnJhckJ0bi5vbmNsaWNrID0gZnVuY3Rpb24gKCkgewogICAgICBjYXJydXNlbENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICBzd2lwZXJXcmFwcGVyLmlubmVySFRNTCA9ICcnOwogICAgICBpZiAoY3VycmVudFN3aXBlcikgewogICAgICAgIHRyeSB7IGN1cnJlbnRTd2lwZXIuZGVzdHJveSh0cnVlLCB0cnVlKTsgfSBjYXRjaCAoZSkge30KICAgICAgICBjdXJyZW50U3dpcGVyID0gbnVsbDsKICAgICAgfQogICAgfTsKICB9Cn0KCndpbmRvdy5tb3N0cmFyQ2FycnVzZWwgPSBtb3N0cmFyQ2FycnVzZWw7CgogIC8vID09PT09PT09PT09PT09PT09PT09PT09PT0KICAvLyBDUkVBUiBFU0NFTkFTCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PQogIGZ1bmN0aW9uIGNyZWF0ZVNjZW5lKHNjZW5lRGF0YSkgewp2YXIgdXJsUHJlZml4ID0gYC9hcGkvc2lnbmVkLXVybD90b2tlbj0ke3dpbmRvdy50b2tlbn0mZmlsZT10aWxlcy8ke3NjZW5lRGF0YS5pZH1gOwp2YXIgc291cmNlID0gTWFyemlwYW5vLkltYWdlVXJsU291cmNlLmZyb21TdHJpbmcoCiAgdXJsUHJlZml4ICsg')/{z}/{f}/{y}/{x}.jpgatob('LAogIHsgY3ViZU1hcFByZXZpZXdVcmw6IHVybFByZWZpeCArIA==')/preview.jpgatob('IH0KKTsKCiAgICB2YXIgZ2VvbWV0cnkgPSBuZXcgTWFyemlwYW5vLkN1YmVHZW9tZXRyeShzY2VuZURhdGEubGV2ZWxzKTsKICAgIHZhciBsaW1pdGVyID0gTWFyemlwYW5vLlJlY3RpbGluZWFyVmlldy5saW1pdC50cmFkaXRpb25hbChzY2VuZURhdGEuZmFjZVNpemUsIDEwMCAqIE1hdGguUEkgLyAxODAsIDEyMCAqIE1hdGguUEkgLyAxODApOwogICAgdmFyIHZpZXcgPSBuZXcgTWFyemlwYW5vLlJlY3RpbGluZWFyVmlldyhzY2VuZURhdGEuaW5pdGlhbFZpZXdQYXJhbWV0ZXJzLCBsaW1pdGVyKTsKICAgIHZhciBzY2VuZSA9IHZpZXdlci5jcmVhdGVTY2VuZSh7IHNvdXJjZTogc291cmNlLCBnZW9tZXRyeTogZ2VvbWV0cnksIHZpZXc6IHZpZXcsIHBpbkZpcnN0TGV2ZWw6IHRydWUgfSk7CgogICAgKHNjZW5lRGF0YS5saW5rSG90c3BvdHMgfHwgW10pLmZvckVhY2goZnVuY3Rpb24gKGhvdHNwb3QpIHsKICAgICAgdmFyIGVsZW1lbnQgPSBjcmVhdGVMaW5rSG90c3BvdEVsZW1lbnQoaG90c3BvdCk7CiAgICAgIHNjZW5lLmhvdHNwb3RDb250YWluZXIoKS5jcmVhdGVIb3RzcG90KGVsZW1lbnQsIHsgeWF3OiBob3RzcG90LnlhdywgcGl0Y2g6IGhvdHNwb3QucGl0Y2ggfSk7CiAgICB9KTsKCiAgICAoc2NlbmVEYXRhLmluZm9Ib3RzcG90cyB8fCBbXSkuZm9yRWFjaChmdW5jdGlvbiAoaG90c3BvdCkgewogICAgICB2YXIgZWxlbWVudCA9IGNyZWF0ZUluZm9Ib3RzcG90RWxlbWVudChob3RzcG90KTsKICAgICAgc2NlbmUuaG90c3BvdENvbnRhaW5lcigpLmNyZWF0ZUhvdHNwb3QoZWxlbWVudCwgeyB5YXc6IGhvdHNwb3QueWF3LCBwaXRjaDogaG90c3BvdC5waXRjaCB9KTsKICAgIH0pOwoKICAgIChzY2VuZURhdGEuaG90U3BvdHMgfHwgW10pLmZvckVhY2goZnVuY3Rpb24gKGhvdHNwb3QpIHsKICAgICAgaWYgKGhvdHNwb3QudHlwZSA9PT0g')cameraatob('KSB7CiAgICAgICAgdmFyIGVsZW1lbnQgPSBjcmVhdGVDYW1lcmFIb3RzcG90KGhvdHNwb3QpOwogICAgICAgIHNjZW5lLmhvdHNwb3RDb250YWluZXIoKS5jcmVhdGVIb3RzcG90KGVsZW1lbnQsIHsgeWF3OiBob3RzcG90LnlhdywgcGl0Y2g6IGhvdHNwb3QucGl0Y2ggfSk7CiAgICAgIH0KICAgIH0pOwoKICAgIHJldHVybiB7IGRhdGE6IHNjZW5lRGF0YSwgc2NlbmU6IHNjZW5lLCB2aWV3OiB2aWV3IH07CiAgfQoKICB2YXIgc2NlbmVzID0gKGRhdGEuc2NlbmVzIHx8IFtdKS5tYXAoY3JlYXRlU2NlbmUpOwoKICAvLyBWaWRlbyBncmFuZGUgc29sbyBwYXJhIGxhIGVzY2VuYSAxCiAgY29uc3QgYmlnU2NlbmVWaWRlb3MgPSB7CiAgICA=')0-plaza-botero-boteroatob('OiBgL2FwaS9zaWduZWQtdXJsP3Rva2VuPSR7d2luZG93LnRva2VufSZmaWxlPXZpZGVvcy9pbnN0cnVjY2lvbmVzLm1wNGAKICB9OwoKICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09CiAgLy8gVklERU8gUE9SIEVTQ0VOQSDigJQgY29udHJvbCBpbmRlcGVuZGllbnRlCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PQogIGNvbnN0IHNjZW5lVmlkZW9zID0gewogIA==')0-plaza-botero-boteroatob('OiBgL2FwaS9zaWduZWQtdXJsP3Rva2VuPSR7d2luZG93LnRva2VufSZmaWxlPXZpZGVvcy92aWRlbzEubXA0YCwKICA=')1-plaza-botero-y-palacio-rafael-uribe-uribeatob('OiBgL2FwaS9zaWduZWQtdXJsP3Rva2VuPSR7d2luZG93LnRva2VufSZmaWxlPXZpZGVvcy92aWRlbzIubXA0YCwKICA=')2-esculturas-y-tradicinatob('OiBgL2FwaS9zaWduZWQtdXJsP3Rva2VuPSR7d2luZG93LnRva2VufSZmaWxlPXZpZGVvcy92aWRlbzMubXA0YCwKICA=')3-palacio-rafael-uribe-uribeatob('OiBgL2FwaS9zaWduZWQtdXJsP3Rva2VuPSR7d2luZG93LnRva2VufSZmaWxlPXZpZGVvcy92aWRlbzQubXA0YCwKICA=')4-parque-de-las-lucesatob('OiBgL2FwaS9zaWduZWQtdXJsP3Rva2VuPSR7d2luZG93LnRva2VufSZmaWxlPXZpZGVvcy92aWRlbzUubXA0YCwKICA=')5-antiguo-ferrocarrilatob('OiBgL2FwaS9zaWduZWQtdXJsP3Rva2VuPSR7d2luZG93LnRva2VufSZmaWxlPXZpZGVvcy92aWRlbzYubXA0YCwKICA=')6-antigua-estacin-medellnatob('OiBgL2FwaS9zaWduZWQtdXJsP3Rva2VuPSR7d2luZG93LnRva2VufSZmaWxlPXZpZGVvcy92aWRlbzcubXA0YCwKICA=')7-alpujarraatob('OiBgL2FwaS9zaWduZWQtdXJsP3Rva2VuPSR7d2luZG93LnRva2VufSZmaWxlPXZpZGVvcy92aWRlbzgubXA0YCwKICA=')8-transicin-ciudad-a-naturalezaatob('OiBgL2FwaS9zaWduZWQtdXJsP3Rva2VuPSR7d2luZG93LnRva2VufSZmaWxlPXZpZGVvcy92aWRlbzkubXA0YCwKICA=')9-pies_descalzosatob('OiBgL2FwaS9zaWduZWQtdXJsP3Rva2VuPSR7d2luZG93LnRva2VufSZmaWxlPXZpZGVvcy92aWRlbzEwLm1wNGAsCiAg')10-conexion-naturalezaatob('OiBgL2FwaS9zaWduZWQtdXJsP3Rva2VuPSR7d2luZG93LnRva2VufSZmaWxlPXZpZGVvcy92aWRlbzExLm1wNGAsCiAg')11-laberinto-de-bambatob('OiBgL2FwaS9zaWduZWQtdXJsP3Rva2VuPSR7d2luZG93LnRva2VufSZmaWxlPXZpZGVvcy92aWRlbzEyLm1wNGAsCiAg')12-edificio-inteligente-epmatob('OiBgL2FwaS9zaWduZWQtdXJsP3Rva2VuPSR7d2luZG93LnRva2VufSZmaWxlPXZpZGVvcy92aWRlbzEzLm1wNGAsCiAg')13-centro-de-convenciones-y-teatroatob('OiBgL2FwaS9zaWduZWQtdXJsP3Rva2VuPSR7d2luZG93LnRva2VufSZmaWxlPXZpZGVvcy92aWRlbzE0Lm1wNGAsCiAg')14-pueblito-paisaatob('OiBgL2FwaS9zaWduZWQtdXJsP3Rva2VuPSR7d2luZG93LnRva2VufSZmaWxlPXZpZGVvcy92aWRlbzE1Lm1wNGAKfTsKCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PQogIC8vIE9WRVJMQVkgREUgVklERU8gR1JBTkRFCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PQogIGZ1bmN0aW9uIHNob3dCaWdPdmVybGF5Rm9yU2NlbmUoc2NlbmVJZCkgewogICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKA==')bigVideoOverlayatob('KTsKICAgIGNvbnN0IGJhY2tkcm9wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQo')bigVideoBackdropatob('KTsKICAgIGNvbnN0IGJpZ1ZpZGVvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQo')bigSceneVideoatob('KTsKICAgIGNvbnN0IHBsYXlCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCg=')bigPlayPauseBtnatob('KTsKICAgIGNvbnN0IG11dGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCg=')bigMuteBtnatob('KTsKICAgIGNvbnN0IGNsb3NlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQo')bigCloseBtnatob('KTsKCiAgICBpZiAoIW92ZXJsYXkgfHwgIWJpZ1ZpZGVvKSByZXR1cm47CgogICAgLy8gU2kgbm8gaGF5IHZpZGVvIGNvbmZpZ3VyYWRvIHBhcmEgZXN0YSBlc2NlbmEsIG9jdWx0YXIgb3ZlcmxheQogICAgaWYgKCFiaWdTY2VuZVZpZGVvc1tzY2VuZUlkXSkgewogICAgICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSA=')noneatob('OwogICAgICBiYWNrZHJvcC5zdHlsZS5kaXNwbGF5ID0g')noneatob('OwogICAgICBiaWdPdmVybGF5T3BlbiA9IGZhbHNlOwogICAgICByZXR1cm47CiAgICB9CgogICAgLy8gTW9zdHJhciBvdmVybGF5CiAgICBiaWdPdmVybGF5T3BlbiA9IHRydWU7CiAgICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSA=')flexatob('OwogICAgYmFja2Ryb3Auc3R5bGUuZGlzcGxheSA9IA==')blockatob('OwogICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHsKICAgICAgb3ZlcmxheS5jbGFzc0xpc3QuYWRkKA==')visibleatob('KTsKICAgICAgYmFja2Ryb3AuY2xhc3NMaXN0LmFkZCg=')visibleatob('KTsKICAgIH0pOwoKICAgIC8vIENvbmZpZ3VyYXIgZnVlbnRlIHkgcmVwcm9kdWNpciAoYXV0b3BsYXkgaW50ZW50KQogICAgYmlnVmlkZW8uc3JjID0gYmlnU2NlbmVWaWRlb3Nbc2NlbmVJZF07CiAgICBiaWdWaWRlby5sb2FkKCk7CiAgICBiaWdWaWRlby5wbGF5KCkuY2F0Y2goKCkgPT4geyAgfSk7CgogICAgLy8gQ29udHJvbGVzCiAgICBpZiAocGxheUJ0bikgewogICAgICBwbGF5QnRuLm9uY2xpY2sgPSAoKSA9PiB7CiAgICAgICAgaWYgKGJpZ1ZpZGVvLnBhdXNlZCkgeyBiaWdWaWRlby5wbGF5KCk7IHBsYXlCdG4udGV4dENvbnRlbnQgPSA=')‚è∏atob('OyB9CiAgICAgICAgZWxzZSB7IGJpZ1ZpZGVvLnBhdXNlKCk7IHBsYXlCdG4udGV4dENvbnRlbnQgPSA=')‚ñ∂atob('OyB9CiAgICAgIH07CiAgICB9CiAgICBpZiAobXV0ZUJ0bikgewogICAgICBtdXRlQnRuLm9uY2xpY2sgPSAoKSA9PiB7CiAgICAgICAgYmlnVmlkZW8ubXV0ZWQgPSAhYmlnVmlkZW8ubXV0ZWQ7CiAgICAgICAgbXV0ZUJ0bi50ZXh0Q29udGVudCA9IGJpZ1ZpZGVvLm11dGVkID8g')üîá" : "üîäatob('OwogICAgICB9OwogICAgfQoKICAgIGZ1bmN0aW9uIGNsb3NlT3ZlcmxheSgpIHsKICAgICAgb3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKA==')visibleatob('KTsKICAgICAgYmFja2Ryb3AuY2xhc3NMaXN0LnJlbW92ZSg=')visibleatob('KTsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0g')noneatob('OwogICAgICAgIGJhY2tkcm9wLnN0eWxlLmRpc3BsYXkgPSA=')noneatob('OwogICAgICB9LCAzNTApOwogICAgICB0cnkgeyBiaWdWaWRlby5wYXVzZSgpOyBiaWdWaWRlby5jdXJyZW50VGltZSA9IDA7IH0gY2F0Y2ggKGUpIHt9CiAgICAgIGJpZ092ZXJsYXlPcGVuID0gZmFsc2U7CgogICAgICAvLyBJbmljaWFyIHZpZGVvIHBlcXVlw7FvIDVzIGRlc3B1w6lzIGRlIGNlcnJhci90ZXJtaW5hcgogICAgICBzbWFsbFN0YXJ0VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHVwZGF0ZVZpZGVvRm9yU2NlbmUoc2NlbmVJZCwgMCk7CiAgICAgIH0sIDUwMDApOwogICAgfQoKICAgIGlmIChjbG9zZUJ0bikgY2xvc2VCdG4ub25jbGljayA9IGNsb3NlT3ZlcmxheTsKICAgIGlmIChiYWNrZHJvcCkgYmFja2Ryb3Aub25jbGljayA9IChlKSA9PiB7IGlmIChlLnRhcmdldCA9PT0gYmFja2Ryb3ApIGNsb3NlT3ZlcmxheSgpOyB9OwoKICAgIC8vIEN1YW5kbyB0ZXJtaW5hIOKGkiBkZXNlbmNhZGVuYSBjaWVycmUgeSBlbCBhcnJhbnF1ZSBwZXF1ZcOxbwogICAgYmlnVmlkZW8ub25lbmRlZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgY2xvc2VPdmVybGF5KCk7CiAgICB9OwogIH0KCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PQogIC8vIFZJREVPIFBFUVVFw5FPIExBVEVSQUwKICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09CiAgZnVuY3Rpb24gdXBkYXRlVmlkZW9Gb3JTY2VuZShzY2VuZUlkLCBmb3JjZURlbGF5KSB7CiAgICBjb25zdCB2aWRlb0NhcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCg=')videoCardatob('KTsKICAgIGNvbnN0IHNjZW5lVmlkZW8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCg=')sceneVideoatob('KTsKICAgIGlmICghdmlkZW9DYXJkIHx8ICFzY2VuZVZpZGVvKSByZXR1cm47CgogICAgLy8gTGltcGlhciB0aW1lcnMgcHJldmlvcwogICAgaWYgKGN1cnJlbnRWaWRlb1RpbWVvdXQpIHsKICAgICAgY2xlYXJUaW1lb3V0KGN1cnJlbnRWaWRlb1RpbWVvdXQpOwogICAgICBjdXJyZW50VmlkZW9UaW1lb3V0ID0gbnVsbDsKICAgIH0KICAgIGlmIChzbWFsbFN0YXJ0VGltZW91dCkgewogICAgICBjbGVhclRpbWVvdXQoc21hbGxTdGFydFRpbWVvdXQpOwogICAgICBzbWFsbFN0YXJ0VGltZW91dCA9IG51bGw7CiAgICB9CgogICAgLy8gRGV0ZW5lciB2aWRlbyBzaSBzZSBjYW1iaWEgZGUgZXNjZW5hCiAgICBpZiAoY3VycmVudFZpZGVvU2NlbmVJZCAmJiBjdXJyZW50VmlkZW9TY2VuZUlkICE9PSBzY2VuZUlkKSB7CiAgICAgIHNjZW5lVmlkZW8ucGF1c2UoKTsKICAgICAgdHJ5IHsgc2NlbmVWaWRlby5jdXJyZW50VGltZSA9IDA7IH0gY2F0Y2ggKGUpIHt9CiAgICB9CgogICAgLy8gU2kgbGEgZXNjZW5hIHRpZW5lIHZpZGVvIGdyYW5kZSB5IGVzdMOhIGFiaWVydG8g4oaSIG9jdWx0YXIgZWwgcGVxdWXDsW8KICAgIGlmIChiaWdTY2VuZVZpZGVvc1tzY2VuZUlkXSAmJiBiaWdPdmVybGF5T3BlbikgewogICAgICB2aWRlb0NhcmQuc3R5bGUuZGlzcGxheSA9IA==')noneatob('OwogICAgICBjdXJyZW50VmlkZW9TY2VuZUlkID0gbnVsbDsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIC8vIFZlcmlmaWNhciBzaSBoYXkgdmlkZW8gcGFyYSBsYSBlc2NlbmEKICAgIGlmICghc2NlbmVWaWRlb3Nbc2NlbmVJZF0pIHsKICAgICAgdmlkZW9DYXJkLmNsYXNzTGlzdC5yZW1vdmUo')visibleatob('KTsKICAgICAgY3VycmVudFZpZGVvU2NlbmVJZCA9IG51bGw7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICAvLyBDb25maWd1cmFyIG51ZXZvIHZpZGVvCiAgICBjdXJyZW50VmlkZW9TY2VuZUlkID0gc2NlbmVJZDsKICAgIHNjZW5lVmlkZW8uc3JjID0gc2NlbmVWaWRlb3Nbc2NlbmVJZF07CiAgICBzY2VuZVZpZGVvLmxvYWQoKTsKCiAvLyBNb3N0cmFyIHRhcmpldGEgZGVsIHZpZGVvCiAgICB2aWRlb0NhcmQuY2xhc3NMaXN0LmFkZCg=')visibleatob('KTsKdmlkZW9DYXJkLnN0eWxlLmRpc3BsYXkgPSA=')blockatob('OwoKICAgIC8vIERlbGF5IGRpbsOhbWljbzogNXMgZW4gbGEgcHJpbWVyYSBlc2NlbmEgKHNpIHNlIHNvbGljaXRhIHBvciBkZWZlY3RvKSwKICAgIC8vIDNzIGVuIGxhcyBkZW3DoXMuIFNpIHNlIHBhc2EgZm9yY2VEZWxheSAobsO6bWVybykgc2UgdXNhIGVzZSB2YWxvci4KICAgIGxldCBkZWxheSA9IDMwMDA7CiAgICBpZiAodHlwZW9mIGZvcmNlRGVsYXkgPT09IA==')numberatob('KSBkZWxheSA9IGZvcmNlRGVsYXk7CiAgICBlbHNlIGlmIChzY2VuZUlkID09PSBGSVJTVF9TQ0VORV9JRCkgZGVsYXkgPSA1MDAwOwoKICAgIGN1cnJlbnRWaWRlb1RpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgc2NlbmVWaWRlby5wbGF5KCkuY2F0Y2goZXJyID0+IGNvbnNvbGUud2Fybig=')No se pudo reproducir el video:atob('LCBlcnIpKTsKICAgIH0sIGRlbGF5KTsKCiAgICAvLyBTaSBlbCB2aWRlbyB0ZXJtaW5hIHkgc2VndWltb3MgZW4gbGEgbWlzbWEgZXNjZW5hIOKGkiBwYXVzYXIgeSBkZWphciDDumx0aW1vIGZyYW1lCiAgICBzY2VuZVZpZGVvLm9uZW5kZWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChjdXJyZW50VmlkZW9TY2VuZUlkID09PSBzY2VuZUlkKSB7CiAgICAgICAgc2NlbmVWaWRlby5wYXVzZSgpOwogICAgICAgIHRyeSB7IHNjZW5lVmlkZW8uY3VycmVudFRpbWUgPSBzY2VuZVZpZGVvLmR1cmF0aW9uOyB9IGNhdGNoIChlKSB7fQogICAgICB9CiAgICB9OwogIH0KCiAgLy8gLS0tLSBDb250cm9sZXMgcGVyc29uYWxpemFkb3MgZGUgdmlkZW8gKHBlcXVlw7FvKSAtLS0tCiAgY29uc3QgdmlkZW8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCg=')sceneVideoatob('KTsKICBjb25zdCBwbGF5UGF1c2VCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCg=')playPauseBtnatob('KTsKICBjb25zdCBtdXRlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQo')muteBtnatob('KTsKICAvLyBBbGd1bm9zIEhUTUwgdGVuw61hbiBkb3MgaWRzIGRpZmVyZW50ZXMgcGFyYSBjZXJyYXI6IGNsb3NlVmlkZW9DYXJkIHkgY2xvc2VCdG4g4oCUIGludGVudG8gc29wb3J0YXIgYW1ib3MuCiAgY29uc3QgY2xvc2VWaWRlb0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKA==')closeVideoCardatob('KSB8fCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCg=')closeBtnatob('KTsKICBjb25zdCB2aWRlb0NhcmRFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKA==')videoCardatob('KTsKICBjb25zdCB2aWRlb0ljb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCg=')videoIconatob('KTsKCiAgaWYgKHZpZGVvICYmIHBsYXlQYXVzZUJ0biAmJiBtdXRlQnRuICYmIGNsb3NlVmlkZW9CdG4gJiYgdmlkZW9DYXJkRWwgJiYgdmlkZW9JY29uKSB7CiAgICBwbGF5UGF1c2VCdG4uYWRkRXZlbnRMaXN0ZW5lcig=')clickatob('LCAoKSA9PiB7CiAgICAgIGlmICh2aWRlby5wYXVzZWQpIHsKICAgICAgICB2aWRlby5wbGF5KCk7CiAgICAgICAgcGxheVBhdXNlQnRuLnRleHRDb250ZW50ID0g')‚è∏atob('OwogICAgICB9IGVsc2UgewogICAgICAgIHZpZGVvLnBhdXNlKCk7CiAgICAgICAgcGxheVBhdXNlQnRuLnRleHRDb250ZW50ID0g')‚ñ∂atob('OwogICAgICB9CiAgICB9KTsKCiAgICBtdXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIo')clickatob('LCAoKSA9PiB7CiAgICAgIHZpZGVvLm11dGVkID0gIXZpZGVvLm11dGVkOwogICAgICBtdXRlQnRuLnRleHRDb250ZW50ID0gdmlkZW8ubXV0ZWQgPyA=')üîá" : "üîäatob('OwogICAgfSk7CgogICAgLy8gQ2VycmFyIHRhcmpldGEg4oaSIG1vc3RyYXIgaWNvbm8gZmxvdGFudGUKICAgIGNsb3NlVmlkZW9CdG4uYWRkRXZlbnRMaXN0ZW5lcig=')clickatob('LCAoKSA9PiB7CiAgICAgIHZpZGVvLnBhdXNlKCk7CiAgICAgIHZpZGVvQ2FyZEVsLnN0eWxlLmRpc3BsYXkgPSA=')noneatob('OwogICAgICB2aWRlb0ljb24uc3R5bGUuZGlzcGxheSA9IA==')blockatob('OwogICAgfSk7CgogICAgLy8gUmVhYnJpciB0YXJqZXRhIGRlc2RlIGljb25vCiAgICB2aWRlb0ljb24uYWRkRXZlbnRMaXN0ZW5lcig=')clickatob('LCAoKSA9PiB7CiAgICAgIHZpZGVvQ2FyZEVsLnN0eWxlLmRpc3BsYXkgPSA=')blockatob('OwogICAgICB2aWRlb0ljb24uc3R5bGUuZGlzcGxheSA9IA==')noneatob('OwogICAgfSk7CiAgfQoKICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09CiAgLy8gU1dJVENIIFNDRU5FICjDum5pY28sIHJvYnVzdG8pCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PQogIGZ1bmN0aW9uIHN3aXRjaFNjZW5lKHNjZW5lKSB7CiAgICBpZiAoIXNjZW5lKSByZXR1cm47CgogICAgLy8gTGltcGllemE6IHBhcmFyIGN1YWxxdWllciB2aWRlbyAvIHRpbWVycyBkZSBsYSBlc2NlbmEgYW50ZXJpb3IgcGFyYSBldml0YXIgaW50ZXJmZXJlbmNpYXMKICAgIHRyeSB7CiAgICAgIGlmIChjdXJyZW50VmlkZW9UaW1lb3V0KSB7IGNsZWFyVGltZW91dChjdXJyZW50VmlkZW9UaW1lb3V0KTsgY3VycmVudFZpZGVvVGltZW91dCA9IG51bGw7IH0KICAgICAgaWYgKHNtYWxsU3RhcnRUaW1lb3V0KSB7IGNsZWFyVGltZW91dChzbWFsbFN0YXJ0VGltZW91dCk7IHNtYWxsU3RhcnRUaW1lb3V0ID0gbnVsbDsgfQogICAgICB2YXIgc21hbGxWID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NjZW5lVmlkZW8nKTsgaWYgKHNtYWxsVikgeyBzbWFsbFYucGF1c2UoKTsgdHJ5IHsgc21hbGxWLmN1cnJlbnRUaW1lID0gMDsgfSBjYXRjaCAoZSkge30gfQogICAgICB2YXIgYmlnViA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaWdTY2VuZVZpZGVvJyk7IGlmIChiaWdWKSB7IGJpZ1YucGF1c2UoKTsgdHJ5IHsgYmlnVi5jdXJyZW50VGltZSA9IDA7IH0gY2F0Y2ggKGUpIHt9IH0KICAgICAgdmFyIG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmlnVmlkZW9PdmVybGF5Jyk7IHZhciBiYWNrZHJvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaWdWaWRlb0JhY2tkcm9wJyk7CiAgICAgIGlmIChvdmVybGF5KSB7IG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpOyBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IH0KICAgICAgaWYgKGJhY2tkcm9wKSB7IGJhY2tkcm9wLmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTsgYmFja2Ryb3Auc3R5bGUuZGlzcGxheSA9ICdub25lJzsgfQogICAgICBiaWdPdmVybGF5T3BlbiA9IGZhbHNlOwogICAgfSBjYXRjaCAoZSkge30KCiAgICBzdG9wQXV0b3JvdGF0ZSgpOwogICAgdHJ5IHsKICAgICAgc2NlbmUudmlldy5zZXRQYXJhbWV0ZXJzKHNjZW5lLmRhdGEuaW5pdGlhbFZpZXdQYXJhbWV0ZXJzKTsKICAgIH0gY2F0Y2ggKGUpIHsgIH0KCiAgICBzY2VuZS5zY2VuZS5zd2l0Y2hUbygpOwogICAgdXBkYXRlU2NlbmVOYW1lKHNjZW5lKTsKICAgIHVwZGF0ZVNjZW5lTGlzdChzY2VuZSk7CgogICAgLy8gYWN0dWFsaXphciBsYSB2aXN0YSBhY3RpdmEgKHBhcmEgbG9zIGJvdG9uZXMpCiAgICBhY3RpdmVWaWV3ID0gc2NlbmUudmlldzsKCiAgICAvLyBWaWRlbyBwb3IgZXNjZW5hIHkgb3ZlcmxheQogICAgc2hvd0JpZ092ZXJsYXlGb3JTY2VuZShzY2VuZS5kYXRhLmlkKTsKICAgIC8vIFNpIGVsIG92ZXJsYXkgZXN0w6EgYWN0aXZvLCB1cGRhdGVWaWRlb0ZvclNjZW5lIG9jdWx0YXLDoSBlbCBwZXF1ZcOxby4gRWwgaW5pY2lvIHJlYWwKICAgIC8vIGRlbCBwZXF1ZcOxbyBzZSBoYWNlIGRlc3B1w6lzIGRlbCBjaWVycmUgZGVsIGdyYW5kZSBzZWfDum4gbGEgbMOzZ2ljYSBhbnRlcmlvci4KICAgIHVwZGF0ZVZpZGVvRm9yU2NlbmUoc2NlbmUuZGF0YS5pZCk7CgogICAgLy8gTWVuw7ogdmlzaWJsZSBzb2xvIGVuIGxhIGVzY2VuYSBGSVJTVF9TQ0VORV9JRAogICAgaWYgKHNjZW5lLmRhdGEgJiYgc2NlbmUuZGF0YS5pZCA9PT0gRklSU1RfU0NFTkVfSUQpIHsKICAgICAgc2hvd1NjZW5lTGlzdCgpOwogICAgfSBlbHNlIHsKICAgICAgaGlkZVNjZW5lTGlzdCgpOwogICAgfQoKICAgIHN0YXJ0QXV0b3JvdGF0ZSgpOwogIH0KCiAgLy8gSW5pY2lhbGl6YXIgZW4gbGEgcHJpbWVyYSBlc2NlbmEgc2kgZXhpc3RlIChpbnRlbnRvIGFicmlyIEZJUlNUX1NDRU5FX0lEIHNpIGVzdMOhIHByZXNlbnRlKQogIGlmIChzY2VuZXMubGVuZ3RoID4gMCkgewogICAgdmFyIHN0YXJ0ID0gc2NlbmVzLmZpbmQocyA9PiBzLmRhdGEgJiYgcy5kYXRhLmlkID09PSBGSVJTVF9TQ0VORV9JRCkgfHwgc2NlbmVzWzBdOwogICAgc3dpdGNoU2NlbmUoc3RhcnQpOwogIH0KCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PQogIC8vIFVJIGhlbHBlcnMgKG5vbWJyZSB5IGxpc3RhKQogIC8vID09PT09PT09PT09PT09PT09PT09PT09PT0KICBmdW5jdGlvbiB1cGRhdGVTY2VuZU5hbWUoc2NlbmUpIHsKICAgIGlmIChzY2VuZU5hbWVFbGVtZW50KSBzY2VuZU5hbWVFbGVtZW50LmlubmVySFRNTCA9IHNhbml0aXplKHNjZW5lLmRhdGEubmFtZSB8fCAnJyk7CiAgfQoKICBmdW5jdGlvbiB1cGRhdGVTY2VuZUxpc3Qoc2NlbmUpIHsKICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoc2NlbmVFbGVtZW50cyB8fCBbXSwgZnVuY3Rpb24gKGVsKSB7CiAgICAgIGlmICghZWwpIHJldHVybjsKICAgICAgZWwuY2xhc3NMaXN0LnRvZ2dsZSgnY3VycmVudCcsIGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpID09PSAoc2NlbmUgJiYgc2NlbmUuZGF0YSAmJiBzY2VuZS5kYXRhLmlkKSk7CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIHNhbml0aXplKHMpIHsKICAgIHJldHVybiAocyB8fCAnJykucmVwbGFjZSgvJi9nLCAnJmFtcDsnKS5yZXBsYWNlKC88L2csICcmbHQ7JykucmVwbGFjZSgvPi9nLCAnJmd0OycpOwogIH0KCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PQogIC8vIEhPVFNQT1RTIChtYW50ZW5nbyB0dXMgZnVuY2lvbmVzLCBjb24gbcOtbmltbyBjYW1iaW8pCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PQogIGZ1bmN0aW9uIGNyZWF0ZUxpbmtIb3RzcG90RWxlbWVudChob3RzcG90KSB7CiAgICB2YXIgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKCdob3RzcG90JywgJ2xpbmstaG90c3BvdCcpOwoKICAgIHZhciBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7CiAgICBpY29uLnNyYyA9ICdpbWcvbGluay5wbmcnOwogICAgaWNvbi5jbGFzc0xpc3QuYWRkKCdsaW5rLWhvdHNwb3QtaWNvbicpOwogICAgaWYgKHR5cGVvZiBob3RzcG90LnJvdGF0aW9uICE9PSAndW5kZWZpbmVkJykgaWNvbi5zdHlsZS50cmFuc2Zvcm0gPSAncm90YXRlKCcgKyBob3RzcG90LnJvdGF0aW9uICsgJ3JhZCknOwogICAgd3JhcHBlci5hcHBlbmRDaGlsZChpY29uKTsKCiAgICB2YXIgdG9vbHRpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgdG9vbHRpcC5jbGFzc0xpc3QuYWRkKCdob3RzcG90LXRvb2x0aXAnLCAnbGluay1ob3RzcG90LXRvb2x0aXAnKTsKICAgIHZhciBzY2VuZURhdGEgPSBmaW5kU2NlbmVEYXRhQnlJZChob3RzcG90LnRhcmdldCk7CiAgICB0b29sdGlwLmlubmVySFRNTCA9IChzY2VuZURhdGEgJiYgc2NlbmVEYXRhLm5hbWUpID8gc2NlbmVEYXRhLm5hbWUgOiAnJzsKICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQodG9vbHRpcCk7CgogICAgd3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHMgPSBmaW5kU2NlbmVCeUlkKGhvdHNwb3QudGFyZ2V0KTsKICAgICAgaWYgKHMpIHN3aXRjaFNjZW5lKHMpOwogICAgfSk7CiAgICBzdG9wVG91Y2hBbmRTY3JvbGxFdmVudFByb3BhZ2F0aW9uKHdyYXBwZXIpOwogICAgcmV0dXJuIHdyYXBwZXI7CiAgfQoKICBmdW5jdGlvbiBjcmVhdGVJbmZvSG90c3BvdEVsZW1lbnQoaG90c3BvdCkgewogICAgdmFyIHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIHdyYXBwZXIuY2xhc3NMaXN0LmFkZCgnaG90c3BvdCcsICdpbmZvLWhvdHNwb3QnKTsKCiAgICB2YXIgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBoZWFkZXIuY2xhc3NMaXN0LmFkZCgnaW5mby1ob3RzcG90LWhlYWRlcicpOwoKICAgIHZhciBpY29uV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgaWNvbldyYXBwZXIuY2xhc3NMaXN0LmFkZCgnaW5mby1ob3RzcG90LWljb24td3JhcHBlcicpOwogICAgdmFyIGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTsKICAgIGljb24uc3JjID0gJ2ltZy9pbmZvLnBuZyc7CiAgICBpY29uLmNsYXNzTGlzdC5hZGQoJ2luZm8taG90c3BvdC1pY29uJyk7CiAgICBpY29uV3JhcHBlci5hcHBlbmRDaGlsZChpY29uKTsKCiAgICB2YXIgdGl0bGVXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICB0aXRsZVdyYXBwZXIuY2xhc3NMaXN0LmFkZCgnaW5mby1ob3RzcG90LXRpdGxlLXdyYXBwZXInKTsKICAgIHZhciB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgdGl0bGUuY2xhc3NMaXN0LmFkZCgnaW5mby1ob3RzcG90LXRpdGxlJyk7CiAgICB0aXRsZS5pbm5lckhUTUwgPSBob3RzcG90LnRpdGxlIHx8ICcnOwogICAgdGl0bGVXcmFwcGVyLmFwcGVuZENoaWxkKHRpdGxlKTsKCiAgICB2YXIgY2xvc2VXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBjbG9zZVdyYXBwZXIuY2xhc3NMaXN0LmFkZCgnaW5mby1ob3RzcG90LWNsb3NlLXdyYXBwZXInKTsKICAgIHZhciBjbG9zZUljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTsKICAgIGNsb3NlSWNvbi5zcmMgPSAnaW1nL2Nsb3NlLnBuZyc7CiAgICBjbG9zZUljb24uY2xhc3NMaXN0LmFkZCgnaW5mby1ob3RzcG90LWNsb3NlLWljb24nKTsKICAgIGNsb3NlV3JhcHBlci5hcHBlbmRDaGlsZChjbG9zZUljb24pOwoKICAgIGhlYWRlci5hcHBlbmRDaGlsZChpY29uV3JhcHBlcik7CiAgICBoZWFkZXIuYXBwZW5kQ2hpbGQodGl0bGVXcmFwcGVyKTsKICAgIGhlYWRlci5hcHBlbmRDaGlsZChjbG9zZVdyYXBwZXIpOwoKICAgIHZhciB0ZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICB0ZXh0LmNsYXNzTGlzdC5hZGQoJ2luZm8taG90c3BvdC10ZXh0Jyk7CiAgICB0ZXh0LmlubmVySFRNTCA9IGhvdHNwb3QudGV4dCB8fCAnJzsKCiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGhlYWRlcik7CiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHRleHQpOwoKICAgIHZhciBtb2RhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgbW9kYWwuaW5uZXJIVE1MID0gd3JhcHBlci5pbm5lckhUTUw7CiAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKCdpbmZvLWhvdHNwb3QtbW9kYWwnKTsKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobW9kYWwpOwoKICAgIHZhciB0b2dnbGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHdyYXBwZXIuY2xhc3NMaXN0LnRvZ2dsZSgndmlzaWJsZScpOwogICAgICBtb2RhbC5jbGFzc0xpc3QudG9nZ2xlKCd2aXNpYmxlJyk7CiAgICB9OwoKICAgIHdyYXBwZXIucXVlcnlTZWxlY3RvcignLmluZm8taG90c3BvdC1oZWFkZXInKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZSk7CiAgICBtb2RhbC5xdWVyeVNlbGVjdG9yKCcuaW5mby1ob3RzcG90LWNsb3NlLXdyYXBwZXInKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZSk7CgogICAgc3RvcFRvdWNoQW5kU2Nyb2xsRXZlbnRQcm9wYWdhdGlvbih3cmFwcGVyKTsKICAgIHJldHVybiB3cmFwcGVyOwogIH0KCiAgZnVuY3Rpb24gY3JlYXRlQ2FtZXJhSG90c3BvdChob3RzcG90KSB7CiAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpOwogICAgZWxlbWVudC5zcmMgPSBob3RzcG90LmltYWdlIHx8ICdpbWcvQ2FtYXJhLnBuZyc7CiAgICBlbGVtZW50LmNsYXNzTmFtZSA9ICdjYW1lcmEtaG90c3BvdC1pY29uJzsKICAgIGVsZW1lbnQuc3R5bGUgPSA=')width:48px;height:48px;cursor:pointer;border-radius:50%;box-shadow:0 2px 8px rgba(0,0,0,0.25);atob('OwogICAgZWxlbWVudC50aXRsZSA9IGhvdHNwb3QudG9vbHRpcCB8fCBob3RzcG90LnRpdGxlIHx8IA==')atob('OwoKICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChob3RzcG90LmNhcnJ1c2VsKSB7CiAgICAgICAgbW9zdHJhckNhcnJ1c2VsKGhvdHNwb3QuaW1hZ2VzIHx8IFtdLCBob3RzcG90LnRvb2x0aXAgfHwgaG90c3BvdC50aXRsZSB8fCAnJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2hvd0ltYWdlTW9kYWwoaG90c3BvdC5waG90bywgaG90c3BvdC50aXRsZSk7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIGVsZW1lbnQ7CiAgfQoKICBmdW5jdGlvbiBzaG93SW1hZ2VNb2RhbChwaG90b1NyYywgdGl0bGUpIHsKICAgIHZhciBvbGRNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b20taW1hZ2UtbW9kYWwnKTsKICAgIGlmIChvbGRNb2RhbCkgb2xkTW9kYWwucmVtb3ZlKCk7CgogICAgdmFyIG1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBtb2RhbC5pZCA9ICdjdXN0b20taW1hZ2UtbW9kYWwnOwogICAgbW9kYWwuc3R5bGUgPSAncG9zaXRpb246Zml4ZWQ7dG9wOjA7bGVmdDowO3dpZHRoOjEwMHZ3O2hlaWdodDoxMDB2aDtiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC44KTtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7ei1pbmRleDoxMDAwMDsnOwoKICAgIHZhciBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBjb250ZW50LnN0eWxlID0gJ2JhY2tncm91bmQ6I2ZmZjtib3JkZXItcmFkaXVzOjEwcHg7cGFkZGluZzoyMHB4O2JveC1zaGFkb3c6MCA4cHggMzJweCByZ2JhKDAsMCwwLDAuMzIpO3Bvc2l0aW9uOnJlbGF0aXZlOyc7CgogICAgdmFyIGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpOwogICAgaW1nLnNyYyA9IHBob3RvU3JjOwogICAgaW1nLmFsdCA9IHRpdGxlIHx8ICcnOwogICAgaW1nLnN0eWxlID0gJ21heC13aWR0aDo5MHZ3O21heC1oZWlnaHQ6ODB2aDtib3JkZXItcmFkaXVzOjhweDsnOwogICAgY29udGVudC5hcHBlbmRDaGlsZChpbWcpOwoKICAgIGlmICh0aXRsZSkgewogICAgICB2YXIgY2FwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICBjYXB0aW9uLnRleHRDb250ZW50ID0gdGl0bGU7CiAgICAgIGNhcHRpb24uc3R5bGUgPSAnbWFyZ2luLXRvcDoxMHB4O2ZvbnQtd2VpZ2h0OmJvbGQ7dGV4dC1hbGlnbjpjZW50ZXI7JzsKICAgICAgY29udGVudC5hcHBlbmRDaGlsZChjYXB0aW9uKTsKICAgIH0KCiAgICB2YXIgY2xvc2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICBjbG9zZS50ZXh0Q29udGVudCA9ICfDlyc7CiAgICBjbG9zZS5zdHlsZSA9ICdwb3NpdGlvbjphYnNvbHV0ZTt0b3A6OHB4O3JpZ2h0OjE2cHg7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOjJyZW07Y29sb3I6IzIyMjsnOwogICAgY2xvc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7IG1vZGFsLnJlbW92ZSgpOyB9KTsKICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoY2xvc2UpOwoKICAgIG1vZGFsLmFwcGVuZENoaWxkKGNvbnRlbnQpOwogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtb2RhbCk7CgogICAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkgewogICAgICBpZiAoZS50YXJnZXQgPT09IG1vZGFsKSBtb2RhbC5yZW1vdmUoKTsKICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gc3RvcFRvdWNoQW5kU2Nyb2xsRXZlbnRQcm9wYWdhdGlvbihlbGVtZW50KSB7CiAgICBbJ3RvdWNoc3RhcnQnLCAndG91Y2htb3ZlJywgJ3RvdWNoZW5kJywgJ3RvdWNoY2FuY2VsJywgJ3doZWVsJywgJ21vdXNld2hlZWwnXS5mb3JFYWNoKGZ1bmN0aW9uIChldmVudE5hbWUpIHsKICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgZnVuY3Rpb24gKGV2ZW50KSB7IGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOyB9KTsKICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gZmluZFNjZW5lQnlJZChpZCkgewogICAgcmV0dXJuIHNjZW5lcy5maW5kKGZ1bmN0aW9uIChzKSB7IHJldHVybiBzLmRhdGEuaWQgPT09IGlkOyB9KTsKICB9CgogIGZ1bmN0aW9uIGZpbmRTY2VuZURhdGFCeUlkKGlkKSB7CiAgICByZXR1cm4gKGRhdGEuc2NlbmVzIHx8IFtdKS5maW5kKGZ1bmN0aW9uIChzKSB7IHJldHVybiBzLmlkID09PSBpZDsgfSk7CiAgfQoKICAvLyBBc29jaWFyIGV2ZW50b3MgYSBsb3MgZWxlbWVudG9zIGRlIGxhIGxpc3RhIGRlIGVzY2VuYXMgKERPTSkKICBzY2VuZXMuZm9yRWFjaChmdW5jdGlvbiAoc2NlbmUpIHsKICAgIHZhciBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzY2VuZUxpc3QgLnNjZW5lW2RhdGEtaWQ9')atob('ICsgc2NlbmUuZGF0YS5pZCArIA==')atob('XScpOwogICAgaWYgKCFlbCkgcmV0dXJuOwogICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgIHN3aXRjaFNjZW5lKHNjZW5lKTsKICAgICAgaWYgKGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2JpbGUnKSkgaGlkZVNjZW5lTGlzdCgpOwogICAgfSk7CiAgfSk7CgogIC8vIEZ1bGxzY3JlZW4KICBpZiAoc2NyZWVuZnVsbCAmJiBzY3JlZW5mdWxsLmVuYWJsZWQgJiYgZGF0YS5zZXR0aW5ncyAmJiBkYXRhLnNldHRpbmdzLmZ1bGxzY3JlZW5CdXR0b24pIHsKICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnZnVsbHNjcmVlbi1lbmFibGVkJyk7CiAgICBpZiAoZnVsbHNjcmVlblRvZ2dsZUVsZW1lbnQpIHsKICAgICAgZnVsbHNjcmVlblRvZ2dsZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7IHNjcmVlbmZ1bGwudG9nZ2xlKCk7IH0pOwogICAgICBzY3JlZW5mdWxsLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7IGZ1bGxzY3JlZW5Ub2dnbGVFbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoJ2VuYWJsZWQnLCBzY3JlZW5mdWxsLmlzRnVsbHNjcmVlbik7IH0pOwogICAgfQogIH0KCiAgLy8gQXV0b3JvdGF0ZQogIGlmIChhdXRvcm90YXRlVG9nZ2xlRWxlbWVudCkgYXV0b3JvdGF0ZVRvZ2dsZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVBdXRvcm90YXRlKTsKICB2YXIgYXV0b3JvdGF0ZSA9IE1hcnppcGFuby5hdXRvcm90YXRlKHsgeWF3U3BlZWQ6IDAuNSwgdGFyZ2V0UGl0Y2g6IC0wLjM1MjksIHRhcmdldEZvdjogTWF0aC5QSSAvIDIgfSk7CiAgaWYgKGRhdGEuc2V0dGluZ3MgJiYgZGF0YS5zZXR0aW5ncy5hdXRvcm90YXRlRW5hYmxlZCkgewogICAgaWYgKGF1dG9yb3RhdGVUb2dnbGVFbGVtZW50KSBhdXRvcm90YXRlVG9nZ2xlRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlbmFibGVkJyk7CiAgfQoKICBmdW5jdGlvbiB0b2dnbGVBdXRvcm90YXRlKCkgewogICAgaWYgKCFhdXRvcm90YXRlVG9nZ2xlRWxlbWVudCkgcmV0dXJuOwogICAgaWYgKGF1dG9yb3RhdGVUb2dnbGVFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZW5hYmxlZCcpKSB7CiAgICAgIGF1dG9yb3RhdGVUb2dnbGVFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2VuYWJsZWQnKTsgc3RvcEF1dG9yb3RhdGUoKTsKICAgIH0gZWxzZSB7CiAgICAgIGF1dG9yb3RhdGVUb2dnbGVFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2VuYWJsZWQnKTsgc3RhcnRBdXRvcm90YXRlKCk7CiAgICB9CiAgfQogIGZ1bmN0aW9uIHN0YXJ0QXV0b3JvdGF0ZSgpIHsKICAgIGlmICghYXV0b3JvdGF0ZVRvZ2dsZUVsZW1lbnQgfHwgIWF1dG9yb3RhdGVUb2dnbGVFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZW5hYmxlZCcpKSByZXR1cm47CiAgICB2aWV3ZXIuc3RhcnRNb3ZlbWVudChhdXRvcm90YXRlKTsgdmlld2VyLnNldElkbGVNb3ZlbWVudCgzMDAwLCBhdXRvcm90YXRlKTsKICB9CiAgZnVuY3Rpb24gc3RvcEF1dG9yb3RhdGUoKSB7IHZpZXdlci5zdG9wTW92ZW1lbnQoKTsgdmlld2VyLnNldElkbGVNb3ZlbWVudChJbmZpbml0eSk7IH0KCiAgLy8gTW9zdHJhci9vY3VsdGFyIGxpc3RhIGVzY2VuYXMKICBmdW5jdGlvbiBzaG93U2NlbmVMaXN0KCkgeyBpZiAoc2NlbmVMaXN0RWxlbWVudCkgc2NlbmVMaXN0RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlbmFibGVkJyk7IGlmIChzY2VuZUxpc3RUb2dnbGVFbGVtZW50KSBzY2VuZUxpc3RUb2dnbGVFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2VuYWJsZWQnKTsgfQogIGZ1bmN0aW9uIGhpZGVTY2VuZUxpc3QoKSB7IGlmIChzY2VuZUxpc3RFbGVtZW50KSBzY2VuZUxpc3RFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2VuYWJsZWQnKTsgaWYgKHNjZW5lTGlzdFRvZ2dsZUVsZW1lbnQpIHNjZW5lTGlzdFRvZ2dsZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZW5hYmxlZCcpOyB9CgogIC8vIFRvZ2dsZSBsaXN0YSBlc2NlbmFzIChib3TDs24pCiAgdmFyIHNjZW5lTGlzdFRvZ2dsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKA==')sceneListToggleatob('KTsKICB2YXIgc2NlbmVMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQo')sceneListatob('KTsKICBpZiAoc2NlbmVMaXN0VG9nZ2xlICYmIHNjZW5lTGlzdCkgewogICAgc2NlbmVMaXN0VG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIo')clickatob('LCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBpc0VuYWJsZWQgPSBzY2VuZUxpc3QuY2xhc3NMaXN0LnRvZ2dsZSg=')enabledatob('KTsKICAgICAgdmFyIGljb25PbiA9IHNjZW5lTGlzdFRvZ2dsZS5xdWVyeVNlbGVjdG9yKA==').icon.onatob('KTsKICAgICAgdmFyIGljb25PZmYgPSBzY2VuZUxpc3RUb2dnbGUucXVlcnlTZWxlY3Rvcig=').icon.offatob('KTsKICAgICAgaWYgKGljb25PbikgaWNvbk9uLnN0eWxlLmRpc3BsYXkgPSBpc0VuYWJsZWQgPyA=')inline" : "noneatob('OwogICAgICBpZiAoaWNvbk9mZikgaWNvbk9mZi5zdHlsZS5kaXNwbGF5ID0gaXNFbmFibGVkID8g')none" : "inline";
    });
  }

// =========================
// BOT√ìN DE PANTALLA COMPLETA
// =========================
if (document.fullscreenEnabled) {
  const fsBtn = document.getElementById('fullscreenToggle');
  if (fsBtn) {
    fsBtn.addEventListener('click', function() {
      if (document.fullscreenElement) {
        document.exitFullscreen();
      } else {
        document.body.requestFullscreen();
      }
    });
  }
} else {
  const fsBtn = document.getElementById('fullscreenToggle');
  if (fsBtn) fsBtn.style.display = 'none';
}

// =========================
// BOTONES DE CONTROL
// =========================
var velocity = 1;
var zoomSpeed = 1;

  var el;
  el = document.getElementById('viewLeft');
  if (el) el.addEventListener('click', function () { if (activeView) activeView.setYaw(activeView.yaw() - velocity); });
  el = document.getElementById('viewRight');
  if (el) el.addEventListener('click', function () { if (activeView) activeView.setYaw(activeView.yaw() + velocity); });
  el = document.getElementById('viewUp');
  if (el) el.addEventListener('click', function () { if (activeView) activeView.setPitch(activeView.pitch() + velocity); });
  el = document.getElementById('viewDown');
  if (el) el.addEventListener('click', function () { if (activeView) activeView.setPitch(activeView.pitch() - velocity); });
  el = document.getElementById('viewIn');
  if (el) el.addEventListener('click', function () { if (activeView) activeView.setFov(activeView.fov() - zoomSpeed); });
  el = document.getElementById('viewOut');
  if (el) el.addEventListener('click', function () { if (activeView) activeView.setFov(activeView.fov() + zoomSpeed); });

  // Si no es mobile, mostramos la lista (pero switchScene la ocultar√° si no es la primera escena)
  if (!document.body.classList.contains('mobile')) showSceneList();

})();
